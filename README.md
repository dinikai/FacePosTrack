# Что такое FacePosTrack
FacePosTrack (FPT) - самопальная система трекинга башки (позже добавлю руки);

Так как мне не хочется покупать Oculus rift cv1 за 57 тысяч рублей (и это без контроллеров), я решил сам разработать систему трекинга;
Сделана она на основе Ардуины Нано (китайской), акселерометра-магнитометра-гироскопа GY-85 и прошивки от Razor AHRS (https://github.com/Razor-AHRS/razor-9dof-ahrs). Гироскоп приклеен к наушникам;
## Трекинг поворота головы
Программа в репозитории - почти то же самое, что и SteamVR. Работает так: читает данные из сериал порта с ардуины, записывает в разделяемую память данные о повороте (yaw, pitch, roll) по адресу "fpt", а игра, которая хочет использовать эти данные их читает.
## Трекинг позиции головы
В первой версии трекинга позиции головы используется красный светодиод приклееный на наушники. С помощью библиотеки AForge картинка с камеры фильтруется по красному цвету и через BlobCounter отслеживается в пространстве. Работает это все очень криво и только в полной темноте, при любом свете трекинг сбивается и не работает.

В новой версии я планирую сделать трекинг через инфракрасные светодиоды и все подобное, а может даже как-то повторить маяки Vive. Не факт что получится, но так как первая версия работает плохо, а других идей у меня нет, так что другого выхода нет. )
# Как пользоваться программой
![ImgPreview](https://user-images.githubusercontent.com/81509646/161682783-8fa1c7e7-4a4b-43d4-85fa-f1ee9cd60936.png)

Во-первых, ищем ардуину в списке COM-портов. Если ее нет, попробуйте обновить список. После открытия порта выбираем камеру из списка и запускаем виртуальную реальность. Видим положение светодиода и поворот головы в градусах по трем осям. Позиция светодиода отслеживается только по двум осям, ведь камера только одна.
